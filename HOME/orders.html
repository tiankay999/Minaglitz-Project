<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Tracking - MinaGlitzy</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="cart.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-container">
            <div class="logo-container">
                <a href="Dashboard.html" class="logo">
                    <span class="crown">MinaGlitzy</span>
                </a>
            </div>
            <nav class="main-nav">
                <ul class="nav-links">
                    <li><a href="Dashboard.html">Home</a></li>
                    <li><a href="showmore.html">Shop</a></li>
                    <li><a href="aboutus.html">About Us</a></li>
                    <li><a href="/Book Appointments/appointments.html">Services</a></li>
                    <li><a href="orders.html">Orders</a></li>
                </ul>
            </nav>
            <div class="header-right">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search wigs and cosmetics here">
                </div>
                <div class="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </div>
                 <div class="user-profile">
                    <img src="minaglitz.jpg" alt="Profile" class="profile-img">
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="orders-page">
        <div class="container">
            <div class="orders-header">
                <h1>My Orders</h1>
                <p>Track your purchases and order status</p>
            </div>

            <div id="orders-list" class="orders-list">
                <!-- Orders will be dynamically loaded here -->
            </div>

            <div id="no-orders" class="no-orders" style="display: none;">
                <h2>No Orders Found</h2>
                <p>You haven't placed any orders yet. <a href="Dashboard.html">Start shopping</a> to see your orders here.</p>
            </div>
        </div>
    </main>

    <!-- Order Details Modal -->
    <div id="order-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="order-details">
                <!-- Order details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="cart.js"></script>
    <script>
        // Order tracking functionality
        class OrderTracker {
            constructor() {
                this.orders = JSON.parse(localStorage.getItem('minaglitz_orders')) || [];
                this.init();
            }

            init() {
                this.displayOrders();
                this.setupEventListeners();
            }

            displayOrders() {
                const ordersList = document.getElementById('orders-list');
                const noOrders = document.getElementById('no-orders');

                if (this.orders.length === 0) {
                    ordersList.style.display = 'none';
                    noOrders.style.display = 'block';
                    return;
                }

                noOrders.style.display = 'none';
                ordersList.innerHTML = '';

                this.orders.forEach(order => {
                    const orderCard = this.createOrderCard(order);
                    ordersList.appendChild(orderCard);
                });
            }

            createOrderCard(order) {
                const card = document.createElement('div');
                card.className = 'order-card';
                card.innerHTML = `
                    <div class="order-header">
                        <h3>Order #${order.id}</h3>
                        <span class="order-status status-${order.status.toLowerCase().replace(' ', '-')}">${order.status}</span>
                    </div>
                    <div class="order-info">
                        <p><strong>Date:</strong> ${new Date(order.date).toLocaleDateString()}</p>
                        <p><strong>Total:</strong> ¢${order.total.toFixed(2)}</p>
                        <p><strong>Items:</strong> ${order.items.length} item(s)</p>
                    </div>
                    <div class="order-actions">
                        <button class="view-details-btn" data-order-id="${order.id}">View Details</button>
                    </div>
                `;
                return card;
            }

            setupEventListeners() {
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('view-details-btn')) {
                        const orderId = e.target.getAttribute('data-order-id');
                        this.showOrderDetails(orderId);
                    }
                });

                // Close modal functionality
                const modal = document.getElementById('order-modal');
                const closeModal = document.querySelector('.close-modal');

                closeModal.addEventListener('click', () => {
                    modal.style.display = 'none';
                });

                window.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            }

            showOrderDetails(orderId) {
                const order = this.orders.find(o => o.id === orderId);
                if (!order) return;

                const modal = document.getElementById('order-modal');
                const details = document.getElementById('order-details');

                details.innerHTML = `
                    <h2>Order Details #${order.id}</h2>
                    <div class="order-detail-section">
                        <h3>Order Information</h3>
                        <p><strong>Date:</strong> ${new Date(order.date).toLocaleDateString()}</p>
                        <p><strong>Status:</strong> ${order.status}</p>
                        <p><strong>Total:</strong> ¢${order.total.toFixed(2)}</p>
                        <p><strong>Email:</strong> ${order.userDetails.email}</p>
                        <p><strong>Location:</strong> ${order.userDetails.location}</p>
                        <p><strong>Payment Method:</strong> ${order.paymentMethod}</p>
                    </div>
                    <div class="order-detail-section">
                        <h3>Items</h3>
                        <div class="order-items">
                            ${order.items.map(item => `
                                <div class="order-item">
                                    <img src="${item.image}" alt="${item.name}" style="width: 50px; height: 50px; object-fit: cover;">
                                    <div class="item-info">
                                        <h4>${item.name}</h4>
                                        <p>Price: ¢${item.price}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ${order.userDetails.specialOffers ? `
                        <div class="order-detail-section">
                            <h3>Special Notes</h3>
                            <p>${order.userDetails.specialOffers}</p>
                        </div>
                    ` : ''}
                `;

                modal.style.display = 'block';
            }

            addOrder(orderData) {
                const order = {
                    id: Date.now().toString(),
                    date: new Date().toISOString(),
                    status: 'Processing',
                    total: orderData.total,
                    items: orderData.items,
                    userDetails: orderData.userDetails,
                    paymentMethod: orderData.paymentMethod
                };

                this.orders.push(order);
                this.saveOrders();
                this.displayOrders();
            }

            saveOrders() {
                localStorage.setItem('minaglitz_orders', JSON.stringify(this.orders));
            }
        }

        // Initialize order tracker
        const orderTracker = new OrderTracker();

        // Make it available globally for cart.js integration
        window.orderTracker = orderTracker;
    </script>
</body>
</html>
